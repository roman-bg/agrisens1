(this.webpackJsonptaste_of_mqtt_in_react=this.webpackJsonptaste_of_mqtt_in_react||[]).push([[0],{155:function(e,t){},157:function(e,t){},180:function(e,t){},181:function(e,t){},183:function(e,t){},185:function(e,t){},193:function(e,t){},195:function(e,t){},198:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(78),i=n.n(c),r=(n(85),n(30)),s=n(13),l=n(31),u=n(32),p=n(22),h=(n(86),n(79)),m=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"popup"},o.a.createElement("div",{className:"popup\\_inner"},o.a.createElement("p",null,this.props.text," ",o.a.createElement("a",{href:"https://www.agrisense.xyz/info.pdf"},"\u0442\u0443\u043a")),o.a.createElement("button",{onClick:this.props.closePopup},"\u0437\u0430\u0442\u0432\u043e\u0440\u0438")))}}]),n}(o.a.Component),d=function e(t,n,a){var o=this;Object(p.a)(this,e),this.client=Object(h.connect)(t,{clientId:"testnodejs",protocolId:"MQIsdp",protocolVersion:3,connectTimeout:1e3,debug:!0}),this.client.on("connect",(function(){o.client.subscribe(n,(function(e){e?console.log("error"):console.log("subscribed to "+n)}))})),this.client.on("message",a)},b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleTopicChange=a.handleTopicChange.bind(Object(s.a)(a)),a.handleBrokerUrlChange=a.handleBrokerUrlChange.bind(Object(s.a)(a)),a.mqttConnect=a.mqttConnect.bind(Object(s.a)(a)),a.onMqttMessage=a.onMqttMessage.bind(Object(s.a)(a)),a.client=null,a.state={broker_url:"ws://62.171.174.215:9093",topic:"tempo",temperature:0},a}return Object(r.a)(n,[{key:"handleTopicChange",value:function(e){this.setState({topic:e.target.value})}},{key:"handleBrokerUrlChange",value:function(e){this.setState({broker_url:e.target.value})}},{key:"mqttConnect",value:function(e){null!=this.client&&this.client.end(),this.client=new d(this.state.broker_url,this.state.topic,this.onMqttMessage),e.preventDefault()}},{key:"onMqttMessage",value:function(e,t){this.setState({temperature:parseFloat(t.toString())})}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"App-header"},o.a.createElement("div",null,o.a.createElement("button",{onClick:this.togglePopup.bind(this)}," \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),this.state.showPopup?o.a.createElement(m,{text:"\u0437\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e\u0442\u043d\u043e\u0441\u043d\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u0438\u0442\u0435 \u043d\u0430\u0441\u0435\u043a\u043e\u043c\u0438 \u0438\u0437\u0442\u0435\u0433\u043b\u0435\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0442\u0430 ",closePopup:this.togglePopup.bind(this)}):null),o.a.createElement("h1",null,"\u0421\u0443\u043c\u0430 \u043d\u0430 \u0435\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0438\u0442\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0438"),o.a.createElement("p",null,this.state.temperature," \u2103")),o.a.createElement("form",{className:"App-form",onSubmit:this.mqttConnect},o.a.createElement("input",{className:"App-broker-url",type:"hidden",name:"broker_url",placeholder:"broker url",value:this.state.broker_url,onChange:this.handleBrokerUrlChange}),o.a.createElement("input",{className:"App-mqtt-topic",type:"hidden",name:"mqtt_topic",placeholder:"mqtt topic",value:this.state.topic,onChange:this.handleTopicChange}),o.a.createElement("input",{className:"App-submit",type:"submit",value:"Connect"})))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,n){e.exports=n(198)},85:function(e,t,n){},86:function(e,t,n){},89:function(e,t){},91:function(e,t){}},[[80,1,2]]]);
//# sourceMappingURL=main.636782b9.chunk.js.map